#{extends 'main.html' /}
#{set title:'Editar Perfil' /}

<body class="list-page">
    <header class="header list-header">
         <h1>Editar Perfil</h1>
         <p class="slogan">Atualize suas informações.</p>
     </header>
     <div class="separator list-separator"></div>
     <main class="list-main">
         <div class="form-card">
             <h2>Seus Dados</h2>
             <form action="@{ClientesPerfil.atualizarPerfil()}" method="POST">

                 #{ifErrors}
                     <div class="alert alert-danger">
                         <p>Corrija os erros abaixo:</p>
                         <ul>
                         #{errors}
                             <li>${error}</li>
                         #{/errors}
                         </ul>
                     </div>
                 #{/ifErrors}

                 <input type="hidden" name="cliente.id" value="${clienteLogado?.id}">

                 <div class="form-group">
                     <label for="iNome">Nome Completo:</label>
                     <input type="text" id="iNome" name="cliente.nome" value="${flash['cliente.nome'] ?: clienteLogado?.nome}" required>
                 </div>

                 <div class="form-group">
                     <label for="iTelefone">Telefone:</label>
                     <input type="text" id="iTelefone" name="cliente.telefone" value="${flash['cliente.telefone'] ?: clienteLogado?.telefone}" required>
                 </div>

                 <div class="form-group">
                      <label for="iEmail">Email:</label>
                      <input type="email" id="iEmail" name="cliente.email" value="${flash['cliente.email'] ?: clienteLogado?.email}" required>
                      <small class="form-hint">Alterar o email pode exigir confirmação (se implementado).</small>
                  </div>
                 <div class="form-group">
                      <label for="iSenha">Nova Senha:</label>
                      <input type="password" id="iSenha" name="senha" value="">
                      <small class="form-hint">Deixe em branco para não alterar a senha.</small>
                  </div>

                 <button type="submit">Salvar Alterações</button>
             </form>
              <div class="navigation-buttons" style="margin-top: 20px;">
                  <a href="@{ClientesPerfil.perfil()}" class="action-btn">Cancelar</a>
              </div>
         </div>
     </main>
 </body>